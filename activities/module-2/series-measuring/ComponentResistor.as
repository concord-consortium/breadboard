package {    import flash.display.Loader;    import flash.display.MovieClip;	import flash.display.DisplayObject;	import flash.display.DisplayObjectContainer;    import flash.display.Sprite;    import flash.events.Event;    import flash.events.MouseEvent;    import flash.geom.ColorTransform;    import flash.net.URLRequest;    import flash.media.Sound;    import flash.media.SoundChannel;    import flash.media.SoundTransform;		import flash.text.TextField;    import flash.text.TextFormat;    import flash.text.TextFieldAutoSize;		import Lead;    import org.concord.sparks.JavaScript;    import Globe;        public class ComponentResistor extends ComponentObj {                        private var m_bandCount:int;        private var m_resistanceValue:Number = NaN;        private var m_pngBandSuffix:String;                private var bandOneColor:String = "blue";        private var bandTwoColor:String = "blue";        private var bandThreeColor:String = "blue";        private var bandFourColor:String = "blue";        private var bandToleranceColor:String = "blue";				private var colors:Array = null;                private var graphicsLayer:DisplayObjectContainer;		private var lead1:Lead;		private var lead2:Lead;            private var m_bandOneLoader:Loader = null;        private var m_bandTwoLoader:Loader = null;        private var m_bandThreeLoader:Loader = null;        private var m_bandFourLoader:Loader = null;        private var m_bandToleranceLoader:Loader = null;				private var bandZoom:Boolean = true;		private var printColor:TextField = new TextField();		private var printColor1:TextField = new TextField();        private var format:TextFormat = new TextFormat();		private var format1:TextFormat = new TextFormat();		private var bandX:Number;		private var bandY:Number;		private var band_ScaleX:Number;		private var band_ScaleY:Number;		private var band1_ScaleY:Number;		private var textX:Number;		private var textY:Number;		private const textTrim:Number = 8;                public function ComponentResistor(bandCount:int, pngBandSuffix:String) {            			super();            graphicsLayer = DisplayObjectContainer(this.getChildByName('graphics_mc'));            //get leads and position leads			this.putLeadsOnBottom();            lead1 = this.getEnds()[0];            lead2 = this.getEnds()[1];            positionLeads(lead1, 0,0, 0);            positionLeads(lead2, 175, 0, 0);            m_bandCount = bandCount;            m_pngBandSuffix = pngBandSuffix;                        //testResistorTips();			setupBandZoom();						this.graphicsLayer.getChildByName('label_mc').visible=false;        }				public function setLabel(labelStr:String){			if(labelStr != ''){				trace('resistorLabel is: '+labelStr);				var label_mc:MovieClip = MovieClip(this.graphicsLayer.getChildByName('label_mc'));							var formatLabel:TextFormat = new TextFormat();				formatLabel.color = 0xFAEBEB;				formatLabel.size = 17;				formatLabel.bold = true;				formatLabel.font = "Arial";							label_mc.labelTextField = new TextField();				label_mc.labelTextField.defaultTextFormat = formatLabel;				label_mc.labelTextField.selectable = false;				label_mc.labelTextField.x = 7;				label_mc.labelTextField.y = 3;				label_mc.labelTextField.text = labelStr;				label_mc.labelTextField.width = label_mc.labelTextField.textWidth+5;				label_mc.labelTextField.height = label_mc.labelTextField.textHeight+2;				label_mc.addChild(label_mc.labelTextField);							this.addEventListener(MouseEvent.MOUSE_OVER, labelOn);				this.addEventListener(MouseEvent.MOUSE_OUT, labelOff);			}		}				private function labelOn(event:MouseEvent):void {			this.graphicsLayer.getChildByName('label_mc').visible=true;		}		private function labelOff(event:MouseEvent):void {			this.graphicsLayer.getChildByName('label_mc').visible=false;		}		        		public function getBandZoom():Boolean {			return bandZoom;		}				public function setBandZoom(bandZoom:Boolean):void {			this.bandZoom = bandZoom;		}		        				private function setupBandZoom():void {			this.graphicsLayer.getChildByName("band1").addEventListener(MouseEvent.MOUSE_OVER, zoomBand1);            this.graphicsLayer.getChildByName("band1").addEventListener(MouseEvent.MOUSE_OUT, unzoomBand1);            this.graphicsLayer.getChildByName("band2").addEventListener(MouseEvent.MOUSE_OVER, zoomBand2); 	 		this.graphicsLayer.getChildByName("band2").addEventListener(MouseEvent.MOUSE_OUT, unzoomBand2);            this.graphicsLayer.getChildByName("band3").addEventListener(MouseEvent.MOUSE_OVER, zoomBand3); 	 		this.graphicsLayer.getChildByName("band3").addEventListener(MouseEvent.MOUSE_OUT, unzoomBand3);            this.graphicsLayer.getChildByName("band4").addEventListener(MouseEvent.MOUSE_OVER, zoomBand4); 	 		this.graphicsLayer.getChildByName("band4").addEventListener(MouseEvent.MOUSE_OUT, unzoomBand4);			if(this.m_bandCount == 5) {				this.graphicsLayer.getChildByName("band5").addEventListener(MouseEvent.MOUSE_OVER, zoomBand5); 	 			this.graphicsLayer.getChildByName("band5").addEventListener(MouseEvent.MOUSE_OUT, unzoomBand5);			} 	 		 	 		format.font = "Verdana";        	format.color = 0x2F3309;        	format.size = 18;        	format.bold = true;			//format1 = format;			format1.font = "Verdana";        	format1.color = 0x2F3309;        	format1.bold = true;			format1.size = 6;        	        	printColor.defaultTextFormat = format; 			printColor.height = 40;			printColor.background = true;			printColor.backgroundColor = 0xE5DBC6;			printColor.selectable = false;			printColor1.defaultTextFormat = format1; 			printColor1.height = 40;			printColor1.background = true;			printColor1.backgroundColor = 0xE5DBC6;			printColor1.selectable = false;									textX = -15; //-5			textY = -35; //-25						bandX = -3;			bandY = -30;			band_ScaleX = 1.75;			band1_ScaleY = 3; //2.5			band_ScaleY = 3;		}				private function zoomBand1 (event:MouseEvent):void		{			trace('zoomBand1');			//sendEvent('ENTER zoomBand1');			var band = this.graphicsLayer.getChildByName("band1");			band.scaleX = band_ScaleX;			band.scaleY = band1_ScaleY;			band.x +=bandX;			band.y +=bandY;								printColor1.x = 0;			printColor1.y = (-13);  			printColor1.text = colors[0];			trace('color[0] '+colors[0]);			printColor1.width = printColor1.textWidth*2.2+2;			printColor1.height = printColor1.textHeight*1.4;			//printColor.height=40;			band.addChild(printColor1);		}				private function unzoomBand1 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band1");			band.scaleX = 1;			band.scaleY = 1;			band.x -=bandX;			band.y -=bandY;			band.removeChild(printColor1);		}				private function zoomBand2 (event:MouseEvent):void		{			trace('zoomBand2');			var band = this.graphicsLayer.getChildByName("band2");			band.scaleX = band_ScaleX;			band.scaleY = band_ScaleY;			band.x +=bandX;			band.y +=bandY;        				printColor.x = (band.x + textX);			printColor.y = (band.y + textY);			printColor.text = colors[1];			printColor.width = printColor.textWidth + textTrim;			printColor.height = printColor.textHeight + textTrim;						this.addChild(printColor);		}		private function unzoomBand2 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band2");			band.scaleX = 1;			band.scaleY = 1;			band.x -=bandX;			band.y -=bandY;			this.removeChild(printColor);		}   		private function zoomBand3 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band3");			band.scaleX = band_ScaleX;			band.scaleY = band_ScaleY;			band.x +=bandX;			band.y +=bandY;						printColor.x = (band.x + textX);			printColor.y = (band.y + textY);			printColor.text = colors[2];			printColor.width = printColor.textWidth + textTrim;			printColor.height = printColor.textHeight + textTrim;			this.addChild(printColor);		}		private function unzoomBand3 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band3");			band.scaleX = 1;			band.scaleY = 1;			band.x -=bandX;			band.y -=bandY;			this.removeChild(printColor);		}				private function zoomBand4 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band4");			band.scaleX = band_ScaleX;			band.scaleY = band_ScaleY;			band.x +=bandX;			band.y +=bandY;						printColor.x = (band.x + textX);			printColor.y = (band.y + textY);			printColor.text = colors[3];			printColor.width = printColor.textWidth + textTrim;			printColor.height = printColor.textHeight + textTrim;						this.addChild(printColor);		}		private function unzoomBand4 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band4");			band.scaleX = 1;			band.scaleY = 1;			band.x -=bandX;			band.y -=bandY;			this.removeChild(printColor);		}				private function zoomBand5 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band5");			band.scaleX = band_ScaleX;			band.scaleY = band_ScaleY;			band.x +=bandX;			band.y +=bandY;						printColor.x = (band.x + textX);			printColor.y = (band.y + textY);			printColor.text = colors[4];			printColor.width = printColor.textWidth + textTrim;			printColor.height = printColor.textHeight + textTrim;						this.addChild(printColor);		}		private function unzoomBand5 (event:MouseEvent):void		{			var band = this.graphicsLayer.getChildByName("band5");			band.scaleX = 1;			band.scaleY = 1;			band.x -=bandX;			band.y -=bandY;			this.removeChild(printColor);		}				                public function setColorBands(colors:Array) {            const toleranceBandName:String = (m_bandCount > 4) ? "band5" : "band4";						this.colors = colors;                        if (m_bandOneLoader != null)                Sprite(this.graphicsLayer.getChildByName("band1")).removeChild(m_bandOneLoader);            if (m_bandTwoLoader != null)                Sprite(this.graphicsLayer.getChildByName("band2")).removeChild(m_bandOneLoader);            if (m_bandThreeLoader != null)                Sprite(this.graphicsLayer.getChildByName("band3")).removeChild(m_bandOneLoader);            if (m_bandFourLoader != null)                Sprite(this.graphicsLayer.getChildByName("band4")).removeChild(m_bandOneLoader);            if (m_bandToleranceLoader != null)                Sprite(this.graphicsLayer.getChildByName(toleranceBandName)).removeChild(m_bandToleranceLoader);                    //load image into Band1            m_bandOneLoader = new Loader();             Sprite(this.graphicsLayer.getChildByName("band1")).addChild(m_bandOneLoader);             var bandOneBitmap:URLRequest = new URLRequest(m_pngBandSuffix + "/t_" + colors[0] + ".png");             m_bandOneLoader.load(bandOneBitmap);                         //load image into Band2            m_bandTwoLoader = new Loader();             Sprite(this.graphicsLayer.getChildByName("band2")).addChild(m_bandTwoLoader);             var bandTwoBitmap:URLRequest = new URLRequest(m_pngBandSuffix + "/s_" + colors[1] + ".png");             m_bandTwoLoader.load(bandTwoBitmap);                         //load image into Band3            m_bandThreeLoader = new Loader();             Sprite(this.graphicsLayer.getChildByName("band3")).addChild(m_bandThreeLoader);             var bandThreeBitmap:URLRequest = new URLRequest(m_pngBandSuffix + "/s_" + colors[2] + ".png");             m_bandThreeLoader.load(bandThreeBitmap);                        //load image into Band4            m_bandFourLoader = new Loader();             Sprite(this.graphicsLayer.getChildByName("band4")).addChild(m_bandFourLoader);             var bandFourBitmap:URLRequest = new URLRequest(m_pngBandSuffix + "/s_" + colors[3] + ".png");             m_bandFourLoader.load(bandFourBitmap);             //load image into Band5            if (colors.length > 4) {              m_bandToleranceLoader = new Loader();              Sprite(this.graphicsLayer.getChildByName(toleranceBandName)).addChild(m_bandToleranceLoader);              var bandToleranceBitmap:URLRequest = new URLRequest(m_pngBandSuffix + "/s_" + colors[4] + ".png");              m_bandToleranceLoader.load(bandToleranceBitmap);            }        }    //NOTES    //enter values because resistor is smaller on screen yet program looks at true values     //var hotspotWidth:Number = 12;    //var hotspotHeight:Number = 3.4;    //var resistorBodyWidth:Number = 43;    //resistor rollover left x = .8    //resistor rollover left y = 7.3    //resistor rollover right x =     //hard code rollover and resistorTip values based on resistor width of 67    //use resistor_sm.fla for guidance - set size to desired size of resistor    //use testResistorTips to tweak resistorTip x and y values                }}